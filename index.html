<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Todo JS</title>
</head>
<body>
    <h1>Todo list</h1>
    
    <div id="todo">
    <button id="btn">Add a task</button>
    <div id="count"></div>
        <div id="todoCards">
            <div class="todoCard">
                <textarea maxlength="200" cols="20" rows="15" class="task">New task</textarea>
                <span class="delBtn"><i class="fa fa-trash" aria-hidden="true"></i></span>
        </div>
        </div>
            <script>

                let btn = document.querySelector("#btn")
                let cards = document.querySelector("#todoCards")
                let card = document.querySelector(".todoCard")
                let delBtn = document.querySelector(".delBtn")
                let count = document.querySelector("#count")
                

                btn.addEventListener("click",ajout)
                
                delBtn.addEventListener("click",function(){
                    suppression(card)
                })
                
                countCards()

                function ajout(){
                    let newCard = card.cloneNode(true)
                    cards.appendChild(newCard)
                    let newDelBtn = newCard.querySelector(".delBtn")
                    newDelBtn.addEventListener("click",function(){
                        suppression(newCard)
                    })
                    countCards()
                }
                function suppression(cardDlt){
                    cardDlt.remove()
                    countCards()
                }
                function countCards(){
                tempCount = cards.querySelectorAll(".todoCard")
                count.innerText = tempCount.length
                }
            </script>
    </div>
</body>
</html>